<!DOCTYPE html>
<meta charset="utf-8">
<title>Test Suite</title>
<script type="module">
  import UserAgent from './browser.js';

  async function tests() {
    const ua = new UserAgent();

    const url = new URL(document.location);
    url.pathname = '/';

    const res = await ua.get(`${url}hello`);
    console.assert(await res.text() === 'Hello World!', '"Hello World!" plain text body');

    const finalRes = await ua.get(`${url}hello`);
    document.write('<div id="hello">' + await finalRes.text() + '</div>');
  }

  tests();
</script>
